{"version":3,"mappings":"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","names":["_client","_provider","_isUserRejectedRequestError","CoinbaseWalletConnector","WagmiConnector","_ref","options","_classPrivateMethodInitSpec","_defineProperty","walletIds","_classPrivateFieldInitSpec","accounts","getAddress","chainId","id","normalizeChainId","unsupported","provider","account","e","providers.Web3Provider","error","UserRejectedRequestError","_classPrivateFieldGet","CoinbaseWalletSDK","__vitePreload","_classPrivateFieldSet","walletExtensionChainId","_a","chain","chain_","jsonRpcUrl","hexValue","x","ChainNotConfiguredError","addError","_classPrivateMethodGet","_isUserRejectedRequestError2","AddChainError","SwitchChainError"],"sources":["../../node_modules/@thirdweb-dev/wallets/evm/connectors/coinbase-wallet/dist/thirdweb-dev-wallets-evm-connectors-coinbase-wallet.browser.esm.js"],"sourcesContent":["import { _ as _classPrivateMethodInitSpec, a as _classPrivateMethodGet } from '../../../../dist/classPrivateMethodGet-ea199cc3.browser.esm.js';\nimport { _ as _classPrivateFieldInitSpec, b as _classPrivateFieldGet, a as _classPrivateFieldSet } from '../../../../dist/classPrivateFieldSet-a5db7c83.browser.esm.js';\nimport { _ as _defineProperty } from '../../../../dist/defineProperty-c8ecdc07.browser.esm.js';\nimport { providers } from 'ethers';\nimport { getAddress, hexValue } from 'ethers/lib/utils.js';\nimport { w as walletIds } from '../../../../dist/walletIds-1ea97411.browser.esm.js';\nimport { W as WagmiConnector } from '../../../../dist/WagmiConnector-60b19604.browser.esm.js';\nimport { n as normalizeChainId } from '../../../../dist/normalizeChainId-e4cc0175.browser.esm.js';\nimport { U as UserRejectedRequestError, C as ChainNotConfiguredError, A as AddChainError, S as SwitchChainError } from '../../../../dist/errors-105ad187.browser.esm.js';\nimport '@thirdweb-dev/chains';\nimport 'eventemitter3';\n\nvar _client = /*#__PURE__*/new WeakMap();\nvar _provider = /*#__PURE__*/new WeakMap();\nvar _isUserRejectedRequestError = /*#__PURE__*/new WeakSet();\nclass CoinbaseWalletConnector extends WagmiConnector {\n  constructor(_ref) {\n    let {\n      chains,\n      options\n    } = _ref;\n    super({\n      chains,\n      options: {\n        reloadOnDisconnect: false,\n        ...options\n      }\n    });\n    _classPrivateMethodInitSpec(this, _isUserRejectedRequestError);\n    _defineProperty(this, \"id\", walletIds.coinbase);\n    _defineProperty(this, \"name\", \"Coinbase Wallet\");\n    _defineProperty(this, \"ready\", true);\n    _classPrivateFieldInitSpec(this, _client, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldInitSpec(this, _provider, {\n      writable: true,\n      value: void 0\n    });\n    _defineProperty(this, \"onAccountsChanged\", accounts => {\n      if (accounts.length === 0) {\n        this.emit(\"disconnect\");\n      } else {\n        this.emit(\"change\", {\n          account: getAddress(accounts[0])\n        });\n      }\n    });\n    _defineProperty(this, \"onChainChanged\", chainId => {\n      const id = normalizeChainId(chainId);\n      const unsupported = this.isChainUnsupported(id);\n      this.emit(\"change\", {\n        chain: {\n          id,\n          unsupported\n        }\n      });\n    });\n    _defineProperty(this, \"onDisconnect\", () => {\n      this.emit(\"disconnect\");\n    });\n  }\n  async connect() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    try {\n      const provider = await this.getProvider();\n      this.setupListeners();\n      this.emit(\"message\", {\n        type: \"connecting\"\n      });\n      const accounts = await provider.enable();\n      const account = getAddress(accounts[0]);\n      // Switch to chain if provided\n      let id = await this.getChainId();\n      let unsupported = this.isChainUnsupported(id);\n      if (chainId && id !== chainId) {\n        try {\n          const chain = await this.switchChain(chainId);\n          id = chain.chainId;\n          unsupported = this.isChainUnsupported(id);\n        } catch (e) {\n          console.error(`Connected but failed to switch to desired chain ${chainId}`, e);\n        }\n      }\n      return {\n        account,\n        chain: {\n          id,\n          unsupported\n        },\n        provider: new providers.Web3Provider(provider)\n      };\n    } catch (error) {\n      if (/(user closed modal|accounts received is empty)/i.test(error.message)) {\n        throw new UserRejectedRequestError(error);\n      }\n      throw error;\n    }\n  }\n  async disconnect() {\n    if (!_classPrivateFieldGet(this, _provider)) {\n      return;\n    }\n    const provider = await this.getProvider();\n    provider.removeListener(\"accountsChanged\", this.onAccountsChanged);\n    provider.removeListener(\"chainChanged\", this.onChainChanged);\n    provider.removeListener(\"disconnect\", this.onDisconnect);\n    provider.disconnect();\n    provider.close();\n  }\n  async getAccount() {\n    const provider = await this.getProvider();\n    const accounts = await provider.request({\n      method: \"eth_accounts\"\n    });\n    if (accounts.length === 0) {\n      throw new Error(\"No accounts found\");\n    }\n    // return checksum address\n    return getAddress(accounts[0]);\n  }\n  async getChainId() {\n    const provider = await this.getProvider();\n    const chainId = normalizeChainId(provider.chainId);\n    return chainId;\n  }\n  async getProvider() {\n    if (!_classPrivateFieldGet(this, _provider)) {\n      let CoinbaseWalletSDK = (await import('@coinbase/wallet-sdk')).default;\n      // Workaround for Vite dev import errors\n      // https://github.com/vitejs/vite/issues/7112\n      if (typeof CoinbaseWalletSDK !== \"function\" &&\n      // @ts-expect-error This import error is not visible to TypeScript\n      typeof CoinbaseWalletSDK.default === \"function\") {\n        CoinbaseWalletSDK = CoinbaseWalletSDK.default;\n      }\n      _classPrivateFieldSet(this, _client, new CoinbaseWalletSDK(this.options));\n      const walletExtensionChainId = _classPrivateFieldGet(this, _client).walletExtension?.getChainId();\n      const chain = this.chains.find(chain_ => this.options.chainId ? chain_.chainId === this.options.chainId : chain_.chainId === walletExtensionChainId) || this.chains[0];\n      const chainId = this.options.chainId || chain?.chainId;\n      const jsonRpcUrl = this.options.jsonRpcUrl || chain?.rpc[0];\n      _classPrivateFieldSet(this, _provider, _classPrivateFieldGet(this, _client).makeWeb3Provider(jsonRpcUrl, chainId));\n    }\n    return _classPrivateFieldGet(this, _provider);\n  }\n  async getSigner() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const [provider, account] = await Promise.all([this.getProvider(), this.getAccount()]);\n    return new providers.Web3Provider(provider, chainId).getSigner(account);\n  }\n  async isAuthorized() {\n    try {\n      const account = await this.getAccount();\n      return !!account;\n    } catch {\n      return false;\n    }\n  }\n  async switchChain(chainId) {\n    const provider = await this.getProvider();\n    const id = hexValue(chainId);\n    try {\n      await provider.request({\n        method: \"wallet_switchEthereumChain\",\n        params: [{\n          chainId: id\n        }]\n      });\n      return this.chains.find(x => x.chainId === chainId) ?? {\n        chainId: chainId,\n        name: `Chain ${id}`,\n        slug: `${id}`,\n        nativeCurrency: {\n          name: \"Ether\",\n          decimals: 18,\n          symbol: \"ETH\"\n        },\n        rpc: [\"\"],\n        testnet: false,\n        chain: \"ethereum\",\n        shortName: \"eth\"\n      };\n    } catch (error) {\n      const chain = this.chains.find(x => x.chainId === chainId);\n      if (!chain) {\n        throw new ChainNotConfiguredError({\n          chainId,\n          connectorId: this.id\n        });\n      }\n\n      // Indicates chain is not added to provider\n      if (error.code === 4902) {\n        try {\n          await provider.request({\n            method: \"wallet_addEthereumChain\",\n            params: [{\n              chainId: id,\n              chainName: chain.name,\n              nativeCurrency: chain.nativeCurrency,\n              rpcUrls: chain.rpc,\n              blockExplorerUrls: this.getBlockExplorerUrls(chain)\n            }]\n          });\n          return chain;\n        } catch (addError) {\n          if (_classPrivateMethodGet(this, _isUserRejectedRequestError, _isUserRejectedRequestError2).call(this, addError)) {\n            throw new UserRejectedRequestError(addError);\n          }\n          throw new AddChainError();\n        }\n      }\n      if (_classPrivateMethodGet(this, _isUserRejectedRequestError, _isUserRejectedRequestError2).call(this, error)) {\n        throw new UserRejectedRequestError(error);\n      }\n      throw new SwitchChainError(error);\n    }\n  }\n  async setupListeners() {\n    const provider = await this.getProvider();\n    provider.on(\"accountsChanged\", this.onAccountsChanged);\n    provider.on(\"chainChanged\", this.onChainChanged);\n    provider.on(\"disconnect\", this.onDisconnect);\n  }\n  async getQrUrl() {\n    await this.getProvider();\n    if (!_classPrivateFieldGet(this, _client)) {\n      throw new Error(\"Coinbase Wallet SDK not initialized\");\n    }\n    return _classPrivateFieldGet(this, _client).getQrUrl();\n  }\n}\nfunction _isUserRejectedRequestError2(error) {\n  return /(user rejected)/i.test(error.message);\n}\n\nexport { CoinbaseWalletConnector };\n"],"file":"assets/thirdweb-dev-wallets-evm-connectors-coinbase-wallet.browser.esm.f2bf34a7.js"}