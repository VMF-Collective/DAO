{"version":3,"file":"thirdweb-checkout-7100edf9.browser.esm.5a6385c0.js","sources":["../../node_modules/@thirdweb-dev/sdk/dist/thirdweb-checkout-7100edf9.browser.esm.js"],"sourcesContent":["import { _ as _defineProperty } from './QueryParams-7d9473b5.browser.esm.js';\nimport { cT as ChainId } from './contract-metadata-88f06ef9.browser.esm.js';\nimport invariant from 'tiny-invariant';\n\nconst PAPER_API_BASE = `https://paper.xyz/api`;\nconst PAPER_API_VERSION = `2022-08-12`;\n\n/**\n * @internal\n */\nconst PAPER_API_URL = `${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`;\nconst PAPER_CHAIN_ID_MAP = {\n  [ChainId.Mainnet]: \"Ethereum\",\n  [ChainId.Goerli]: \"Goerli\",\n  [ChainId.Polygon]: \"Polygon\",\n  [ChainId.Mumbai]: \"Mumbai\",\n  [ChainId.Avalanche]: \"Avalanche\"\n};\n\n/**\n * @internal\n */\nfunction parseChainIdToPaperChain(chainId) {\n  invariant(chainId in PAPER_CHAIN_ID_MAP, `chainId not supported by paper: ${chainId}`);\n  return PAPER_CHAIN_ID_MAP[chainId];\n}\n/**\n *\n * @param contractAddress\n * @param chainId\n * @internal\n * @returns the paper xyz contract id\n * @throws if the contract is not registered on paper xyz\n */\nasync function fetchRegisteredCheckoutId(contractAddress, chainId) {\n  const paperChain = parseChainIdToPaperChain(chainId);\n  const res = await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${contractAddress}&chain=${paperChain}`);\n  const json = await res.json();\n  invariant(json.result.id, \"Contract is not registered with paper\");\n  return json.result.id;\n}\n\n/**\n * The parameters for creating a paper.xyz checkout link.\n * @public\n */\n\nconst DEFAULT_PARAMS = {\n  expiresInMinutes: 15,\n  feeBearer: \"BUYER\",\n  sendEmailOnSuccess: true,\n  redirectAfterPayment: false\n};\n\n/**\n * @internal\n */\nasync function createCheckoutLinkIntent(contractId, params) {\n  const res = await fetch(`${PAPER_API_URL}/checkout-link-intent`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      contractId,\n      ...DEFAULT_PARAMS,\n      ...params,\n      metadata: {\n        ...params.metadata,\n        via_platform: \"thirdweb\"\n      },\n      // overrides that are hard coded\n      hideNativeMint: true,\n      hidePaperWallet: !!params.walletAddress,\n      hideExternalWallet: true,\n      hidePayWithCrypto: true,\n      usePaperKey: false\n    })\n  });\n  const json = await res.json();\n  invariant(json.checkoutLinkIntentUrl, \"Failed to create checkout link intent\");\n  return json.checkoutLinkIntentUrl;\n}\n\n/**\n * @internal\n */\nclass PaperCheckout {\n  constructor(contractWrapper) {\n    _defineProperty(this, \"contractWrapper\", void 0);\n    this.contractWrapper = contractWrapper;\n  }\n  async getCheckoutId() {\n    return fetchRegisteredCheckoutId(this.contractWrapper.readContract.address, await this.contractWrapper.getChainID());\n  }\n  async isEnabled() {\n    try {\n      return !!(await this.getCheckoutId());\n    } catch (err) {\n      return false;\n    }\n  }\n  async createLinkIntent(params) {\n    return await createCheckoutLinkIntent(await this.getCheckoutId(), params);\n  }\n}\n\nexport { PAPER_API_URL as P, PaperCheckout as a, createCheckoutLinkIntent as c, fetchRegisteredCheckoutId as f, parseChainIdToPaperChain as p };\n"],"names":["PAPER_API_BASE","PAPER_API_VERSION","PAPER_API_URL","PAPER_CHAIN_ID_MAP","ChainId","parseChainIdToPaperChain","chainId","invariant","fetchRegisteredCheckoutId","contractAddress","paperChain","json","DEFAULT_PARAMS","createCheckoutLinkIntent","contractId","params","PaperCheckout","contractWrapper","_defineProperty"],"mappings":"sDAIA,MAAMA,EAAiB,wBACjBC,EAAoB,aAKpBC,EAAgB,GAAGF,KAAkBC,sBACrCE,EAAqB,CACzB,CAACC,EAAQ,SAAU,WACnB,CAACA,EAAQ,QAAS,SAClB,CAACA,EAAQ,SAAU,UACnB,CAACA,EAAQ,QAAS,SAClB,CAACA,EAAQ,WAAY,WACvB,EAKA,SAASC,EAAyBC,EAAS,CACzC,OAAAC,EAAUD,KAAWH,EAAoB,mCAAmCG,GAAS,EAC9EH,EAAmBG,EAC5B,CASA,eAAeE,EAA0BC,EAAiBH,EAAS,CACjE,MAAMI,EAAaL,EAAyBC,CAAO,EAE7CK,EAAO,MADD,MAAM,MAAM,GAAGT,uCAAmDO,WAAyBC,GAAY,GAC5F,OACvB,OAAAH,EAAUI,EAAK,OAAO,GAAI,uCAAuC,EAC1DA,EAAK,OAAO,EACrB,CAOA,MAAMC,EAAiB,CACrB,iBAAkB,GAClB,UAAW,QACX,mBAAoB,GACpB,qBAAsB,EACxB,EAKA,eAAeC,EAAyBC,EAAYC,EAAQ,CAsB1D,MAAMJ,EAAO,MArBD,MAAM,MAAM,GAAGT,yBAAsC,CAC/D,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CACnB,WAAAY,EACA,GAAGF,EACH,GAAGG,EACH,SAAU,CACR,GAAGA,EAAO,SACV,aAAc,UACf,EAED,eAAgB,GAChB,gBAAiB,CAAC,CAACA,EAAO,cAC1B,mBAAoB,GACpB,kBAAmB,GACnB,YAAa,EACnB,CAAK,CACL,CAAG,GACsB,OACvB,OAAAR,EAAUI,EAAK,sBAAuB,uCAAuC,EACtEA,EAAK,qBACd,CAKA,MAAMK,CAAc,CAClB,YAAYC,EAAiB,CAC3BC,EAAgB,KAAM,kBAAmB,MAAM,EAC/C,KAAK,gBAAkBD,CACxB,CACD,MAAM,eAAgB,CACpB,OAAOT,EAA0B,KAAK,gBAAgB,aAAa,QAAS,MAAM,KAAK,gBAAgB,WAAU,CAAE,CACpH,CACD,MAAM,WAAY,CAChB,GAAI,CACF,MAAO,CAAC,CAAE,MAAM,KAAK,cAAe,CACrC,MAAC,CACA,MAAO,EACR,CACF,CACD,MAAM,iBAAiBO,EAAQ,CAC7B,OAAO,MAAMF,EAAyB,MAAM,KAAK,cAAe,EAAEE,CAAM,CACzE,CACH"}